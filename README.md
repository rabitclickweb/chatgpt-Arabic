# chatgpt-web
عرض تجريبي لـ ChatGPT مبني على واجهة برمجية لـ OpenAI مع تطبيقات JavaScript النقية.

مشروع ChatGPT المطبق بالكامل بلغة جافا سكريبت، معتمد على واجهة برمجية لـ OpenAI.

يمكن نشر ملف HTML واحد للاستخدام.

يدعم العديد من الميزات مثل نسخ/تحديث/تحميل الدردشات، إدخال الصوت، القراءة الصوتية، وغير ذلك، بالإضافة إلى [الخيارات المخصصة](#الخيارات-المخصصة).

يدعم البحث في الدردشات، وضع الظلام، تخصيص الصور الشخصية، الاختصارات، اللغات المتعددة، [المتغيرات البيئية](#المتغيرات-البيئية)، [تطبيق PWA](#تطبيق-PWA)، وعرض حصة الواجهة البرمجية الخاصة.

يدعم [تشفير ملفات HTML](#تشفير-ملفات-html).

المراجع: 
[markdown-it](https://github.com/markdown-it/markdown-it), 
[highlight.js](https://github.com/highlightjs/highlight.js), 
[github-markdown-css](https://github.com/sindresorhus/github-markdown-css), 
[chatgpt-html](https://github.com/slippersheepig/chatgpt-html), 
[markdown-it-copy](https://github.com/ReAlign/markdown-it-copy), 
[markdown-it-texmath](https://github.com/goessner/markdown-it-texmath), 
[awesome-chatgpt-prompts-zh](https://github.com/PlexPt/awesome-chatgpt-prompts-zh)

![مثال](https://raw.githubusercontent.com/xqdoo00o/chatgpt-web/main/example.png)

## العرض التجريبي

[معاينة الأونلاين](https://chat.rabit.click/) (يتطلب التكوين باستخدام واجهة برمجية OpenAI ومفتاح API)

## طريقة الاستخدام
### **ملاحظة: عند نشر الواجهة الخلفية، يرجى مراعاة [مناطق الدعم](https://platform.openai.com/docs/supported-countries) لـ OpenAI. يمكن أن يؤدي النشر على خوادم غير معتمدة إلى حظر الحساب! من الأفضل تكوين HTTPS، ونقل مفتاح API عبر الإنترنت بطريقة آمنة!**
___
- **نشر HTML فقط**

    استخدم أي خادم HTTP لنشر ملف index.html. افتح إعدادات الصفحة، وقم بتعبئة مفتاح الواجهة البرمجية، واكتب عنوان الواجهة الخلفية لـ OpenAI.

    - إذا كنت قادرًا على الوصول بشكل طبيعي إلى `api.openai.com`، اكتب `https://api.openai.com/`.

    - إذا لم يكن بإمكانك الوصول بشكل طبيعي إلى `api.openai.com`، اكتب عنوان الواجهة الخلفية المضادة له (يمكن استخدام خدمات مثل [Cloudflare Worker](https://github.com/xqdoo00o/openai-proxy))، مع العلم: يجب أن تقوم الواجهة الخلفية بإضافة رأس عبور الأصل `Access-Control-Allow-Origin`.

    - يمكن أيضًا تكوين واجهة برمجية OpenAI في [المتغيرات البيئية](#المتغيرات-البيئية).
- **نشر HTML وواجهة برمجية OpenAI مضادة معًا**

    **ملاحظة: يجب على الخادم الوصول بشكل طبيعي إلى `api.openai.com`. لا داعي لتكوين واجه

ة برمجية OpenAI!**
    - استخدم Nginx، وإليك مثال للتكوين

        ```
        map $http_authorization $gptauth {
            default $http_authorization;
            # قم بتكوين مفتاح API الافتراضي، بعد Bearer. إذا كنت ترغب في السماح بتعيين مفتاح API على الويب فقط، فاحذف السطر التالي.
            ""      "Bearer sk-your-token";
        }
        server {
            listen      80;
            server_name example.com;
            # تمكين ضغط واجهة برمجية OpenAI، يتم ضغط الكثير من النص المتكرر بشكل جيد، ويوفر على الخادم كمية كبيرة من حركة المرور.
            gzip on;
            gzip_min_length 1k;
            gzip_types text/event-stream;

            # إذا كنت ترغب في نشرها على مسار فرعي في الموقع مثل "example.com/chatgpt"، فيجب تكوينها كالتالي
            #location ^~ /chatgpt/v1 {
            location ^~ /v1 {
                proxy_pass https://api.openai.com/v1;
                proxy_set_header Host api.openai.com;
                proxy_ssl_name api.openai.com;
                proxy_ssl_server_name on;
                proxy_set_header Authorization $gptauth;
                proxy_pass_header Authorization;
                # التدفقية للإرسال، إذا لم يتم إيقاف buffering، فإنه يمكن أن يتجمد، يجب تكوين هذا!!! 
                proxy_buffering off;
            }
            # تحتاج لتوافق المسار مع الواجهة البرمجية المضادة أعلاه
            #location /chatgpt {
            location / {
                alias /usr/share/nginx/html/;
                index index.html;
            }
        }
        ```
        إذا لم يكن الخادم قادرًا على الوصول بشكل طبيعي إلى `api.openai.com`، فيمكن توصيله بـ socat واستخدام وكيل HTTP، وتكوين proxy_pass كما يلي
        ```
        proxy_pass https://127.0.0.1:8443/v1;
        ```
        ثم قم بتشغيل socat
        ```
        socat TCP4-LISTEN:8443,reuseaddr,fork PROXY:http代理地址:api.openai.com:443,proxyport=http代理端口
        ```
    - استخدم Caddy، ويمكنه توليد شهادة HTTPS تلقائيًا، وإليك مثال للتكوين

        ```
        yourdomain.example.com {
            reverse_proxy /v1/* https://api.openai.com {
                header_up Host api.openai.com
                header_up Authorization "{http.request.header.Authorization}"
                header_up Authorization "Bearer sk-your-token"
            }

            file_server / {
                root /var/wwwroot/chatgpt-web
                index index.html
            }
        }
        ```
        **يدعم Caddy الإصدارات 2.6.5 والأحدث من https_proxy وhttp_proxy environment variables. إذا كان الخادم غير قادر على الوصول بشكل طبيعي إلى `api.openai.com`، يمكنك تعيين متغيرات البيئة للاستعانة بوكيل**

## المتغيرات البيئية
يمكن تكوين واجهة برمجية OpenAI ومفتاح API بشكل منفصل في ملف البيئة.

قم بإنشاء ملف بيئة جديد بالاسم `env.js` في نفس المجلد الخاص بـ index.html، كما يوضح المثال التالي.
```
envAPIEndpoint="https://api.openai.com/"
envAPIKey="sk-your-token"
```

## تطبيق PWA
قم بنشر ملفات [icon.png](https://raw.githubusercontent.com/xqdoo00o/chatgpt-web/main/icon.png)، [manifest.json](https://raw.githubusercontent.com/xqdoo00o/chatgpt-web/main/manifest.json)، [sw.js](https://raw.githubusercontent.com/xqdoo00o/chatgpt-web/main/sw.js) في نفس المجلد الخاص بـ index.html لدعم تطبيق PWA.

**ملاحظة: إذا قمت بتغيير اسم index.html، فيجب تعديل `./index.html` في ملف sw.js.**

**بعد نشر تطبيق PWA، يجب تحديث ملف html و sw.js بشكل متزامن، وإلا فلن يتم التحديث بنجاح.**

## الخيارات المخصصة

- القائمة الجانبية تدعم البحث في الدردشات، وإنشاء/إعادة تسمية/حذف (الدردشات/المجلدات)، واللغتين العربية والإنجليزية، وأوضاع السمات الفاتحة/المظلمة/التلقائية، وتصدير/استيراد/إعادة تعيين البيانات، واختصارات المفاتيح، وعرض حصة الواجهة البرمجية، وعرض التخزين المحلي.

- يمكن تحديد نموذج GPT اختياريًا، الافتراضي هو gpt-3.5، ويتطلب استخ

دام نموذج gpt-4 الحالي طلبًا من OpenAI، أو استخدام [ChatGPT-to-API](https://github.com/xqdoo00o/ChatGPT-to-API) لتمثيل تطبيق ويب ChatGPT كواجهة برمجية (يتطلب حساب Plus لاستخدام gpt-4).

- يمكن تحديد عنوان الواجهة البرمجية لـ OpenAI اختياريًا، ويمكن الاستغناء عنه إذا تم نشر واجهة برمجية مضادة.

- يمكن تحديد مفتاح API اختياريًا، الافتراضي هو عدم التحديد، **إذا كان هناك حاجة إلى تخصيص مفتاح API على الويب، يفضل أن يكون عنوان الواجهة البرمجية محميًا بشكل جيد بواسطة HTTPS، حيث أن نقل مفتاح API عبر الإنترنت بواسطة HTTP يعرضه للخطر بشكل كبير من التسلل.**

- يمكن تخصيص الصور الشخصية للمستخدم، ويمكن تغييرها إلى أي عنوان URL للصورة.

- يمكن تحديد الأدوار النظامية اختياريًا، الافتراضية هي عدم التشغيل، وتتوفر أربعة أدوار معينة مسبقًا، ويتم تحميلها ديناميكيًا من [awesome-chatgpt-prompts-zh](https://github.com/PlexPt/awesome-chatgpt-prompts-zh) أو [awesome-chatgpt-prompts](https://github.com/f/awesome-chatgpt-prompts).

- يمكن تحديد شخصيات الأدوار اختياريًا، الافتراضية هي مرنة ومبتكرة، وتتوافق مع معلمات top_p في وثائق الواجهة البرمجية.

- يمكن تحديد جودة الإجابة اختياريًا، الافتراضية هي متوازنة، وتتوافق مع معلمات درجة الحرارة في وثائق الواجهة البرمجية.

- تغيير سرعة الطابعة اختياريًا، الافتراضية هي سريعة نسبيًا، كلما زادت القيمة كلما زادت السرعة.

- يمكن تحديد حدود معلومات السياق للدردشة المستمرة اختياريًا، الافتراضية هي 25، يمكن أن تؤدي معلومات السياق في الدردشة إلى زيادة تكاليف الواجهة البرمجية. إذا تم تعيينها على 0، فستتم إيقاف الدردشة المستمرة.

- يمكن تمكين الردود الطويلة اختياريًا، الافتراضية هي إيقاف التشغيل، **قد يؤدي التمكين إلى زيادة تكاليف الواجهة البرمجية وفقدان جميع المعلومات السابقة، مما يجعل بعض الردود التي يتعين إرسال "مواصلة" ليست ضرورية.**

- اختيار الصوت

، الافتراضي هو Bing Voice، ويدعم Azure Voice والصوت النظامي، ويمكن تعيين الصوت للسؤال والإجابة بشكل منفصل.

- اختيار مستوى الصوت، الافتراضي هو الحد الأقصى.

- اختيار سرعة الصوت، الافتراضي هو العادي.

- اختيار نبرة الصوت، الافتراضي هو العادي.

- يمكن تمكين القراءة الصوتية المستمرة اختياريًا، الافتراضي هو التمكين، ويتم قراءة النص حتى انتهاء جميع الدردشات.

- يمكن تمكين القراءة الصوتية التلقائية اختياريًا، الافتراضي هو التعطيل، ويتم قراءة الردود الجديدة تلقائيًا. **يجب تمكين الإعدادات-تشغيل تلقائي لمقاطع الفيديو على iOS، ويجب تمكين هذا الموقع-تشغيل تلقائي لجميع مقاطع الفيديو على Safari في Mac**

- يدعم إدخال الصوت اختياريًا، الافتراضي هو الاعتراف بالصوت كلغة عامية، يمكنك تغيير خيارات التعرف على اللغة عن طريق الضغط المطول على زر الصوت. **شروط تعرف الصوت: استخدم متصفحًا يعتمد على نواة Chrome وصفحة ويب مؤمنة بـ HTTPS أو صفحة ويب محلية، واسمح بإذن الميكروفون للصفحة، وكن متأكدًا من تثبيت جهاز الميكروفون.** 

- تلقائيًا إرسال الكلمات الرئيسية، الافتراضي هو فارغ، يتم إرسال الكلمات الرئيسية تلقائيًا عند اكتشافها.

- تلقائيًا توقف عند الكلمات الرئيسية، الافتراضي هو فارغ، يتم إيقاف التعرف عند اكتشاف الكلمات الرئيسية.

- وقت التأخير لإرسال الكلمات الرئيسية، الافتراضي هو 0 ثانية، يعني ذلك عدم إرسالها تلقائيًا. عندما لا تكون 0 ثانية، يعني ذلك فترة زمنية بعد اكتشاف المحتوى حتى يتم إرساله تلقائيًا.

- الاستماع المستمر، الافتراضي هو التعطيل، حيث يحافظ الميكروفون على الاستماع باستمرار، ما لم يكن هناك خطأ في التعرف أو يتم إيقاف التعرف يدويًا.

## تشفير ملفات HTML


- كلمة المرور، يفتح صفحة تشفير HTML.

- ما إذا كان يجب ضغطه، الافتراضي هو السماح، يمكن تقليل حجم الملف بعد التشفير لملفات HTML كبيرة.

- السماح بحفظ كلمة المرور، الافتراضي هو السماح، ما إذا كان يجب على الواجهة الأمامية تذكر كلمة المرور.

- فترة صلاحية حفظ كلمة المرور، الافتراضي هو أبدًا، ع

ند انتهاء الصلاحية، سيتعين عليك إعادة إدخال كلمة المرور.

- نسخ محتوى index.html إلى الشاشة النصية الخاصة بـ HTML المراد تشفيره، ثم اضغط على الزر لتوليد النتيجة، بعد ذلك يمكنك تنزيل ملف HTML المشفر واستبدال index.html به واستخدامه.

**ملاحظة: هذه الطريقة تشفير الجزء الأمامي فقط، ولا تشفير واجهة البرمجة المضادة.**